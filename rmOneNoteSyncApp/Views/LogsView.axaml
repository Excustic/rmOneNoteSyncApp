<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:vm="using:rmOneNoteSyncApp.ViewModels"
             x:Class="rmOneNoteSyncApp.Views.LogsView"
             x:DataType="vm:LogsViewModel">
    
    <UserControl.Styles>
        <Style Selector="TextBox.log-viewer">
            <Setter Property="Background" Value="#1e293b"/>
            <Setter Property="Foreground" Value="#10b981"/>
            <Setter Property="FontFamily" Value="Cascadia Code,Consolas,Courier New,monospace"/>
            <Setter Property="FontSize" Value="12"/>
            <Setter Property="Padding" Value="10"/>
            <Setter Property="AcceptsReturn" Value="True"/>
            <Setter Property="IsReadOnly" Value="True"/>
            <Setter Property="TextWrapping" Value="NoWrap"/>
        </Style>
        
        <Style Selector="ListBoxItem">
            <Setter Property="Padding" Value="8,4"/>
        </Style>
    </UserControl.Styles>
    
    <Grid Margin="30" RowDefinitions="Auto,*">
        <TextBlock Grid.Row="0" Classes="section-title" Text="Logs" Margin="0,0,0,20"/>
        
        <Grid Grid.Row="1" ColumnDefinitions="250,*" ColumnSpacing="20">
            <!-- Log file list -->
            <Border Grid.Column="0" 
                    Background="White" 
                    CornerRadius="8" 
                    BoxShadow="0 2 10 0 #10000000" 
                    Padding="15">
                <DockPanel>
                    <StackPanel DockPanel.Dock="Top" Margin="0,0,0,10">
                        <TextBlock Text="Log Files" FontWeight="SemiBold" Margin="0,0,0,10"/>
                        <Button Content="Refresh" 
                                Command="{Binding LoadLogsCommand}"
                                HorizontalAlignment="Stretch"/>
                    </StackPanel>
                    
                    <ScrollViewer>
                        <ListBox ItemsSource="{Binding LogFiles}"
                                 SelectedItem="{Binding SelectedLogFile}">
                            <ListBox.ItemTemplate>
                                <DataTemplate>
                                    <Border Padding="5">
                                        <StackPanel>
                                            <TextBlock Text="{Binding Name}" 
                                                       FontWeight="SemiBold"/>
                                            <TextBlock Text="{Binding Source}" 
                                                       FontSize="11" 
                                                       Foreground="#6b7280"/>
                                            <TextBlock Text="{Binding Size}" 
                                                       FontSize="11" 
                                                       Foreground="#9ca3af"/>
                                        </StackPanel>
                                    </Border>
                                </DataTemplate>
                            </ListBox.ItemTemplate>
                        </ListBox>
                    </ScrollViewer>
                </DockPanel>
            </Border>
            
            <!-- Log content viewer -->
            <Border Grid.Column="1" 
                    Background="White" 
                    CornerRadius="8" 
                    BoxShadow="0 2 10 0 #10000000" 
                    Padding="15">
                <DockPanel>
                    <!-- Toolbar -->
                    <Border DockPanel.Dock="Top" 
                            Padding="0,0,0,10" 
                            Margin="0,0,0,10"
                            BorderBrush="#e5e7eb"
                            BorderThickness="0,0,0,1">
                        <Grid ColumnDefinitions="*,Auto">
                            <TextBlock Grid.Column="0" 
                                       Text="{Binding SelectedLogFile.DisplayName, FallbackValue='Select a log file'}"
                                       FontWeight="SemiBold"
                                       VerticalAlignment="Center"/>
                            
                            <StackPanel Grid.Column="1" 
                                        Orientation="Horizontal" 
                                        Spacing="10">
                                <CheckBox Content="Auto-refresh" 
                                          IsChecked="{Binding AutoRefresh}"/>
                                <NumericUpDown Value="{Binding RefreshInterval}"
                                               Minimum="1" Maximum="60"
                                               Width="60"
                                               IsEnabled="{Binding AutoRefresh}"/>
                                <Button Content="Refresh" 
                                        Command="{Binding RefreshCurrentLogCommand}"/>
                                <Button Content="Clear" 
                                        Command="{Binding ClearLogCommand}"/>
                                <Button Content="Export" 
                                        Command="{Binding ExportLogCommand}"/>
                            </StackPanel>
                        </Grid>
                    </Border>
                    
                    <!-- Log content -->
                    <Border Background="#1e293b" CornerRadius="4">
                        <Grid>
                            <ScrollViewer HorizontalScrollBarVisibility="Auto"
                                          VerticalScrollBarVisibility="Auto">
                                <TextBox Classes="log-viewer"
                                         Text="{Binding LogContent}"
                                         MinHeight="400"/>
                            </ScrollViewer>
                            
                            <!-- Loading overlay -->
                            <Border Background="#80000000" 
                                    CornerRadius="4"
                                    IsVisible="{Binding IsLoading}">
                                <StackPanel VerticalAlignment="Center" 
                                            HorizontalAlignment="Center">
                                    <ProgressBar IsIndeterminate="True" Width="200"/>
                                    <TextBlock Text="Loading log content..." 
                                               Foreground="White" 
                                               Margin="0,10,0,0"
                                               HorizontalAlignment="Center"/>
                                </StackPanel>
                            </Border>
                        </Grid>
                    </Border>
                </DockPanel>
            </Border>
        </Grid>
    </Grid>
</UserControl>